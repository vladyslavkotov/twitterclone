<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Title</title>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<style>

* {
  box-sizing: border-box;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

button {
  border: none;
  padding: 0;
  background: none;
  cursor:pointer;
}

.make-active-like, .make-active-retweet {
  color:grey;
}

.make-active-like:hover {
  color:rgb(255, 0, 0);
}

.make-inactive-like {
  color:rgb(255, 0, 0);
}

.make-active-retweet:hover  {
  color:rgb(0, 149, 0);
}

.make-inactive-retweet  {
  color:rgb(0, 149, 0);
}

.make-inactive-like:hover, .make-inactive-retweet:hover {
  color:grey;
}

.views {
  color: grey;
}

.views:hover {
  color: rgb(15, 171, 255)
}

.blue-button {
  background-color:rgb(15, 171, 255);
  text-align: center;
  font-weight: bold;
  border-radius:50px;
  color:white;
  padding:5px 15px;
  border:1px;
}

.blue-button:hover{
  background-color:rgb(15, 144, 255);
}

span.form-button {
  border: none;
  padding: 0;
  background: none;
  cursor:pointer;
  }

.navlink {
  border-radius:50px;
  width:auto;
  padding:10px 25px 10px 10px;
  font-size: 20px;
}

.navlink-current {
  font-weight: bold;
}

.divnavlink {
  padding:10px;
}

a.navlink:hover {
  background-color:rgb(225, 225, 225);
  transition: background-color 0.2s;
}

.navlink .material-icons {
  vertical-align: -8px;
  font-size:30px;
}

a {
  text-decoration:none;
}

a:active {
  color:inherit;
}

a:visited { 
  color:inherit; 
}

.col{
  float:left; border:1px solid;
}

.left {
  width:19%; height:100%;
}

.mid {
  width:50%;
}

.right {
  width:30%;
}

.trend {
  box-sizing: border-box;
}

.trend:hover {
  background-color: grey;
}

.tweet {
  border: 1px solid;
  display: block;
}

.tweet:hover{
  background-color: rgb(242, 242, 242);
}

.tweet-userlink-name:hover {
  text-decoration: underline;
  color: black;
}

.tweet-userlink-username {
  color: rgb(119,133,143);
}

.tweet-userlink-time {
  color: rgb(119,133,143);
  text-decoration: underline;
}

a.big-tweet-button {
  background-color:rgb(15, 171, 255);
  color:white;
  padding:10px 40px;
  border-radius:50px;
  font-size: 20px;
  font-weight: bold;
  text-align: center;
}

a.big-tweet-button:hover {
  background-color:rgb(15, 144, 255);
  transition: background-color 0.2s;
}

a.tag {
  color: rgb(15, 171, 255);
}

a.tag:hover {
  text-decoration: underline;
  color: rgb(15, 171, 255);
}

.verified {
  color: rgb(15, 171, 255);
  font-size: 15px;
  vertical-align: -3px;
}

/*----------------------------FOLLOW BUTTON-----------------------------*/
.spanfollow {
  padding-bottom: 10px;
  padding-top: 10px;
  width:100px;
  border-radius: 50px;
  font-weight: bold;
  display: block;
}

.follow {
  background-color: black;
  color:white;
}

.follow:hover {
  background-color: rgb(77, 77, 77);
  color:white;
}

.following {
  background-color: rgb(0, 0, 0);
  color: white;
}

.unfollow {
  display: none;
}

button.unfollow-button:hover .following {
  display: none;
}

button.unfollow-button:hover .unfollow {
  display: block;
  background-color: rgba(255, 0, 0, 0.212);
  color: red;
  border: 1px solid rgb(255, 0, 0);
}

/*----------------------------------------------------------------------*/


.counter{
  vertical-align: 7px;
}

textarea.new-tweet {
  height:40px;
  width: 200px;
  resize: none;
}

.lock {
  font-size: 16px;
  vertical-align: -2px;
  color: black;
  margin: 0px;  
}

.verified-large {
  color: rgb(15, 171, 255);
  font-size: 16px;
  vertical-align: -2px;
  margin: 0px;
}

</style>
</head>
<body>
<section id="navbar" class="col left">

{% if user.is_authenticated %}
<div class="divnavlink">
<a class="navlink" href="{% url 'feed' %}">
  <span class="material-icons">home</span>
  <span>Home</span>
</a>
</div>

<div class="divnavlink">
<a class="navlink" href="{% url 'feed' %}">
  <span class="material-icons">tag</span>
  <span>Explore</span>
</a>
</div>

<div class="divnavlink">
<a class="navlink" href="{% url 'notifications' %}">
  <span class="material-icons">notifications_none</span>
  <span>Notifications</span>
</a>
</div>

<div class="divnavlink">
<a class="navlink" href="{% url 'conversations' %}">
  <span class="material-icons">mail_outline</span>
  <span>Messages</span>
</a>
</div>

<div class="divnavlink">
<a class="navlink" href="{% url 'bookmarks' %}">
  <span class="material-icons">bookmark_border</span>
  <span>Bookmarks</span>
</a>
</div>

<div class="divnavlink">
<a class="navlink" href="{% url 'feed' %}">
  <span class="material-icons">view_headline</span>
  <span>Lists</span>
</a>
</div>

<div class="divnavlink">
<a class="navlink" href="{% url 'userfeed' user.pk %}">
  <span class="material-icons">account_circle</span>
  <span>Profile</span>
</a>
</div>

<div class="divnavlink">
<a class="big-tweet-button" href="{% url 'feed' %}"> 
  <span class="material-icons" style="font-size: 30px; opacity: 0;">account_circle</span>
  <span>Tweet</span>
  <span class="material-icons" style="font-size: 30px; opacity: 0;">account_circle</span>
  </a>
</div>


<p><a href="{% url 'password_change' %}">Change password</a></p>
<br>
<div>{{user}}</div>
<a href="{% url 'logout' %}">Log out</a>
{% else %}
<div class="divnavlink">
<a class="navlink" href="">
  <span class="material-icons">tag</span>
  <span>Explore</span>
</a>
</div>
{% endif %}
</section>

{% block tweets %}
{%endblock%}

{% block notifications %}
{%endblock%}

{% block conversations %}
{%endblock%}

{% block trends %}
{%endblock%}

<script>

const domain='http://localhost:8000';

function getURL() {
  let url=window.location.href;
  const navlinks=document.getElementsByClassName('navlink');
  for (let i = 0; i < navlinks.length; i++) {
    const link=navlinks[i].getAttribute('href');
    if (domain+link==url) {
      var currentClass=navlinks[i].getAttribute('class');
      navlinks[i].setAttribute('class', currentClass+=' navlink-current');
    }
  }
}

function clickable() {
  // const hashtag = /#[a-z0-9_]+[a-z]+\b/gi;
  // const stock = /\$[a-z]{1,5}\b/gi;
  // const mention = /\@[a-z]{4,}\b/gi;
  const regex=/(#[a-z0-9_]+[a-z]+\b)|(\$[a-z]{1,5}\b)|(\@[a-z]{4,}\b)/gi
  const cleanup = /\/[#$@]/g;
  const tweets=document.getElementsByClassName('tweet-text');
  if (tweets.length>0) {
    for (let i = 0; i < tweets.length; i++) {
      var t1=tweets[i].innerHTML;
      t1=t1.replace(regex,`<a class="tag" href="${domain}/search/$&">$&</a>`);
      // t1=t1.replace(hashtag,`<a class="tag" href="${domain}/search/$&">$&</a>`);
      // t1=t1.replace(stock,`<a class="tag" href="${domain}/search/$&">$&</a>`);
      // t1=t1.replace(mention,`<a class="tag" href="${domain}/search/$&">$&</a>`);
      t1=t1.replace(cleanup,"/");
      tweets[i].innerHTML=t1;
      }
    }
}

clickable();
getURL();

</script>

</body>
</html>